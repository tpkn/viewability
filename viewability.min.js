/*!
 * Viewability, http://tpkn.me/
 */
function Viewability(e){function t(e,t,n,o,i,r){return e<=n&&o<=t?100:n<=e&&t<=o?i/r*100:n<=e&&e<=o?(o-e)/r*100:t<=o&&n<=t?(t-n)/r*100:0}if("object"!=typeof e)throw new Error("no config");if("object"!=typeof e.stage)throw new Error("no stage object");if("object"!=typeof e.element)throw new Error("no element object");var n,o,i,r,f,c,l,g,u,a,s,b,p,h,w,y,d,m=e.stage,j=e.element,v=void 0!==e.iab&&e.iab,E="function"!=typeof e.on_visible?null:e.on_visible,H="number"!=typeof e.percentage?50:v?50:e.percentage;return{check:function(){return o=m.pageXOffset||m.scrollLeft,i=m.pageYOffset||m.scrollTop,r=m.innerWidth||m.clientWidth,f=m.innerHeight||m.clientHeight,c=j.offsetWidth,l=j.offsetHeight,a=(g=o)+r,s=(u=i)+f,b=j.getBoundingClientRect().left+o,p=j.getBoundingClientRect().top+i,h=p+l,w=t(g,a,b,b+c,r,c),y=t(u,s,p,h,f,l),d=w*c/100*(y*l/100)/(c*l)*100,clearTimeout(n),H<=d&&E&&(v?n=setTimeout(E,1e3):E()),{x:w,y:y,square:d}}}}